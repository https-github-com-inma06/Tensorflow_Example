<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Atanaio's Develop Blog</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Favicons -->
  <link href="img/favicon.png" rel="icon">
  <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Open+Sans:300,300i,400,400i,700,700i" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="lib/animate/animate.min.css" rel="stylesheet">
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
  <link href="lib/magnific-popup/magnific-popup.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
  <link href="css/style.css" rel="stylesheet">

  <!-- =======================================================
    Theme Name: Avilon
    Theme URL: https://bootstrapmade.com/avilon-bootstrap-landing-page-template/
    Author: BootstrapMade.com
    License: https://bootstrapmade.com/license/
  ======================================================= -->
</head>

<body>

  <!--==========================
    Header
  ============================-->
  <header id="header">
    <div class="container">

      <div id="logo" class="pull-left">
        <h1><a href="#intro" class="scrollto">Atanasio</a></h1>

      </div>

      <nav id="nav-menu-container">
        <ul class="nav-menu">
          <li class="menu-active"><a href="index.html#intro">Home</a></li> 
          <li><a href="index.html#about">Intro</a></li>
          <li><a href="index.html#features">Works</a></li> 
          <li><a href="index.html#contact">Contact Us</a></li>
        </ul>
      </nav><!-- #nav-menu-container -->
    </div>
  </header><!-- #header -->

  <!--==========================
    Intro Section
  ============================-->
    <!-- Home -->

  <section id="intro">

    <div class="intro-text">
      <h2>얼굴로 알아보는 동물상 테스트</h2>
      <a href="#features" class="btn-get-started scrollto">동물상 알아보기</a>
      <a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg" class="btn-get-started scrollto">
        제작도움 : 조코딩 유튜브 채널</a>

    </div>

    <div class="product-screens">

      <div class="product-screen-1 wow fadeInUp" data-wow-delay="0.4s" data-wow-duration="0.6s">
        <img src="img/product-screen-1.png" alt="">
      </div>

      <div class="product-screen-2 wow fadeInUp" data-wow-delay="0.2s" data-wow-duration="0.6s">
        <img src="img/product-screen-2.png" alt="">
      </div>

      <div class="product-screen-3 wow fadeInUp" data-wow-duration="0.6s">
        <img src="img/product-screen-3.png" alt="">
      </div>

    </div>

  </section><!-- #intro -->

  <main id="main">

    <!--==========================
       Animal Us Section
    ============================-->
    <!-- 애니멀 페이스 -->
    <br>
    <br>
    <section id="animal">
      <div class="file-upload">
          <div class="image-upload-wrap">
              <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
              <div class="drag-text">
                  <h3>얼굴 사진을 드래그엔 드롭하거나<br>
                  눌러서 업로드 하세요!</h3>
              </div>
          </div>
          <div class="file-upload-content">
              <img class="file-upload-image" id="face-image" src="#" alt="your image" />
              <p class="result-message"></p>
              <p img class="result-img"></p>
              
              <!-- <img id="result-img" src=""> -->
              </p>
              <br>
              <div id="label-container"></div>
              <div class="image-title-wrap">
                  <button type="button" onclick="removeUpload()" class="remove-image">다른 사진으로 재시도
                  </button>
              </div>
          </div>
      </div>
    </section>
      
  
      
    <!-- #애니멀 페이스 -->
  

  </main>
  <br>
  <br>

  <!--==========================
    Footer
  ============================-->
  <footer id="footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-6 text-lg-left text-center">
          <div class="copyright">
            &copy; Copyright <strong>Atanasio</strong>. All Rights Reserved
          </div>
          <div class="credits">
            <!--
              All the links in the footer should remain intact.
              You can delete the links only if you purchased the pro version.
              Licensing information: https://bootstrapmade.com/license/
              Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Avilon
            -->
            Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
          </div>
        </div>

        <div class="col-lg-6">
          <nav class="footer-links text-lg-right text-center pt-2 pt-lg-0">
            <img src = "img/youtube-copy.jpg" >
            <a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg" class="scrollto">제작도움 : 조코딩 유튜브 채널</a>
                       
          </nav>
        </div>

        <!-- <div class="col-lg-6">
          <nav class="footer-links text-lg-right text-center pt-2 pt-lg-0">
            <a href="#intro" class="scrollto">Home</a>
            <a href="#about" class="scrollto">Intro</a>
            <a href="#about" class="scrollto">Works</a>
            <a href="#about" class="scrollto">Team</a>
            
          </nav>
        </div> -->
      </div>
    </div>
  </footer><!-- #footer -->

  <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

  <!-- JavaScript Libraries -->
  <script src="lib/jquery/jquery.min.js"></script>
  <script src="lib/jquery/jquery-migrate.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/wow/wow.min.js"></script>
  <script src="lib/superfish/hoverIntent.js"></script>
  <script src="lib/superfish/superfish.min.js"></script>
  <script src="lib/magnific-popup/magnific-popup.min.js"></script>
  

  <!-- Contact Form JavaScript File -->
  <script src="contactform/contactform.js"></script>

  <!-- Template Main Javascript File -->
  <script src="js/main.js"></script>

  <!-- 동물상 관련 js -->
  <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  
      <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  
      <script>
          function readURL(input) {
              if (input.files && input.files[0]) {
                  var reader = new FileReader();
                  reader.onload = function(e) {
                      $('.image-upload-wrap').hide();
                      $('.file-upload-image').attr('src', e.target.result);
                      $('.file-upload-content').show();
                      $('.image-title').html(input.files[0].name);
                  };
                  reader.readAsDataURL(input.files[0]);
                  init().then(()=>{
                    console.log("predict() Start");
                    predict();
                    console.log("predict() End");
                  });
                  
              } else {
                  removeUpload();
              }
          }
  
          function removeUpload() {
              $('.file-upload-input').replaceWith($('.file-upload-input').clone());
              $('.file-upload-content').hide();
              $('.image-upload-wrap').show();
          }
          $('.image-upload-wrap').bind('dragover', function() {
              $('.image-upload-wrap').addClass('image-dropping');
          });
          $('.image-upload-wrap').bind('dragleave', function() {
              $('.image-upload-wrap').removeClass('image-dropping');
          });
      </script>
  
      <script type="text/javascript">
          // More API functions here:
          // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
          // the link to your model provided by Teachable Machine export panel
          const URL = "https://teachablemachine.withgoogle.com/models/uVqwbVqP4/";
          let model, webcam, labelContainer, maxPredictions;
          // Load the image model and setup the webcam
          async function init() {
              const modelURL = URL + "model.json";
              const metadataURL = URL + "metadata.json";
              // load the model and metadata
              // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
              // or files from your local hard drive
              // Note: the pose library adds "tmImage" object to your window (window.tmImage)
              model = await tmImage.load(modelURL, metadataURL);
              maxPredictions = model.getTotalClasses();
              // append elements to the DOM
              // labelContainer = document.getElementById("label-container");
              // for (let i = 0; i < maxPredictions; i++) { // and class labels
              //     labelContainer.appendChild(document.createElement("div"));
              // }
          }
          // run the webcam image through the image model
          async function predict() {
              // predict can take in an image, video or canvas html element
              var image = document.getElementById("face-image")
              const prediction = await model.predict(image, false);
              prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
              console.log(prediction[0].className);
              var resultMsg;
              var resultImg;
              switch (prediction[0].className) {
                case "bear":
                  resultImg = "<img src='img/animals/bear.jpg'>"
                  resultMsg = "당신은 곰처럼 듬직한 얼굴로,<br>다른 사람이 기댈수 있는 사람 입니다!"
                  break;
                case "puppy":
                  resultImg = "<img src='img/animals/puppy.jpg'>"
                  resultMsg = "당신은 강아지처럼 귀여운 얼굴로,<br>다른 사람을 기분좋게 만드는 애교쟁이 입니다!"
                  break;
                case "rabbit":
                  resultImg = "<img src='img/animals/rabbit.jpg'>"
                  resultMsg = "당신은 토끼처럼 귀여운 얼굴로,<br>다른 사람을 기분좋게 만드는 애교쟁이 입니다."
                  break;
                case "dinosaur":
                  resultImg = "<img src='img/animals/dinosaur.jpg'>"
                  resultMsg = "당신은 용처럼 멋있는 얼굴로,<br>다른 사람을 기분좋게 만드는 멋쟁이 입니다."
                  break;
                case "cat":
                  resultImg = "<img src='img/animals/cat.jpg'>"
                  resultMsg = "당신은 고양이처럼 도도한 얼굴로,<br>다른 사람이 매력을 느끼게 하는 얼굴상 입니다."
                  break;
              }
              $('.result-message').html(resultMsg);
              $('.result-img').html(resultImg);
              for (let i = 0; i < maxPredictions; i++) {
                  const classPrediction =
                      prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                  labelContainer.childNodes[i].innerHTML = classPrediction;
              }
          }
      </script>

</body>
</html>
